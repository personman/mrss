<?php /** @var \Mrss\Entity\System[] $systems */ ?>

<style>
    .homepage > div {
        padding: 30px;
    }
    .homepage div h2, .homepage div h1 {
        text-align: center;
    }
    .homepage div h1 {
        font-weight: normal;
        font-size: 175%;
    }
    .homepage div h2 {
        font-weight: normal;
        font-size: 260%;
    }
</style>


<div class="row homepage">
<div class="col-md-4">
    <h2>Network Membership</h2>

<?php foreach ($systems as $system): ?>
    <?php $yearRange = 'FY ' . $system->getCurrentYear(); ?>
    <?php $observation = $observationModel->findOne($college->getId(), $system->getCurrentYear()); ?>
    <?php if ($_SERVER['REMOTE_ADDR'] == '216.185.233.188') {
        //pr($college->getId()); pr($system->getCurrentYear()); pr($system->getId());

    } ?>
    <div class="network-wrap">
        <h1><?= $system->getName() ?> (<?= count($system->getColleges()) ?> Cities)</h1>


                <?php $completion =  round($system->getDataEntryStructure()->getCompletionPercentageForObservation($observation)); ?>

                <?php
                $chart = new \Mrss\Service\Report\Chart\Gauge($system->getId(), $completion);

                echo $this->chart($chart->getConfig());

                ?>

                <!--<span>Data Entry Progress <?= $yearRange ?></span>-->


        <div class="clear">&nbsp;</div>
    </div>
<?php endforeach ?>

</div>

    <div class="col-md-4">
        <h2>Community</h2>

        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ipsum dolor sit met, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna a liqua. Ut enim ad minim venom, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea comido consequat. Luis aute irure dolor in reprehenderit in voluptate relit esse cillim dolore eu fuggita nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim√© id est labour.</p>
    </div>

    <div class="col-md-4">
        <h2>govBenchmark News</h2>

        <?php if ($news) echo $news->getContent() ?>
    </div>


</div>



<script>
    $( ".network-wrap .network-dataentry ul" ).each(function( index ) {
        $(this).children('li').each(function( index ) {
            if (index > 5) {
                $(this).css('display', 'none');
            }
        });
    });

    $( ".data-entry-readmore" ).each(function( index ) {
        var showAll = false;
        $(this).click(function(){
            if (showAll == false) {
                $(this).text('Show Less [-]');
                $(this).prev('.network-wrap .network-dataentry ul').children('li').css('display', 'block');
                showAll = true;
            } else {
                $(this).text('Show All [+]');
                $(this).prev('.network-wrap .network-dataentry ul').children('li').each(function( index ) {
                    if (index > 5) {
                        $(this).css('display', 'none');
                    }
                    showAll = false;
                });
            }
        });
    });
</script>

